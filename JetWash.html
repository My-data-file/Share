<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JETWASH LAUNDRY</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f2f2f2; }
  header { background:#0077cc; color:white; padding:15px; text-align:center; font-size:1.5em; font-weight:bold; }
  nav { display:flex; background:#004d80; justify-content:space-around; flex-wrap:wrap; }
  nav button { flex:1; padding:15px; background:#004d80; border:none; color:white; cursor:pointer; }
  nav button:hover { background:#006bb3; }
  .content { padding:20px; }
  .section { display:none; }
  .active { display:block; }
  .form-group { margin-bottom:15px; }
  label { display:block; margin-bottom:5px; font-weight:bold; }
  input[type="text"], input[type="date"], input[type="time"], input[type="number"], textarea { width:100%; padding:10px; box-sizing:border-box; }
  .btnSimpan { background:#0077cc; color:white; border:none; padding:10px 20px; cursor:pointer; border-radius:5px; margin-top:10px; }
  .btnSimpan:hover { background:#005fa3; }
  table { border-collapse:collapse; width:100%; margin-top:10px; background:white; }
  table, th, td { border:1px solid #ccc; }
  th, td { padding:8px; text-align:center; }
  #resetHasilLaundry, #resetAbsen, #resetKomplain { background:#cc0000; }
  @media (max-width:600px){ nav button{ font-size:0.9em; padding:12px; } }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<header>JETWASH LAUNDRY</header>

<nav>
  <button onclick="showSection('absen')">Absen</button>
  <button onclick="showSection('hasil')">Hasil Laundry</button>
  <button onclick="showSection('komplain')">Komplain</button>
</nav>

<div class="content">

  <!-- Absen Section -->
  <div id="absen" class="section active">
    <h2>Form Absen Pegawai</h2>
    <form id="absenForm">
      <div class="form-group">
        <label for="namaPegawai">Nama Pegawai:</label>
        <input type="text" id="namaPegawai" required>
      </div>
      <div class="form-group">
        <label for="tanggalAbsen">Tanggal:</label>
        <input type="date" id="tanggalAbsen" required>
      </div>
      <div class="form-group">
        <label for="jamAbsen">Jam:</label>
        <input type="time" id="jamAbsen" required>
      </div>
      <div class="form-group">
        <label>Foto Absen (opsional):</label><br>
        <button type="button" class="btnSimpan" onclick="document.getElementById('fotoAbsen').click()">üì∑ Ambil Foto</button>
        <input type="file" id="fotoAbsen" accept="image/*" capture="environment" style="display:none;">
        <p id="fotoAbsenPreview" style="margin-top:10px; font-size:14px; color:#555;"></p>
      </div>
      <button type="submit" class="btnSimpan">Kirim Absen</button>
    </form>
    <h3>Data Absen</h3>
    <table id="tabelAbsen">
      <thead><tr><th>Nama</th><th>Tanggal</th><th>Jam</th></tr></thead>
      <tbody></tbody>
    </table>
    <button id="simpanSemuaPDFAbsen" class="btnSimpan" style="display:none;">üíæ Simpan Semua PDF Absen</button>
    <button id="resetAbsen" class="btnSimpan" style="display:none;">‚ö†Ô∏è Reset Data Absen</button>
  </div>

  <!-- Hasil Laundry Section -->
  <div id="hasil" class="section">
    <h2>Hasil Laundry</h2>
    <form id="hasilForm">
      <div class="form-group">
        <label for="namaPelangganHasil">Nama Pelanggan:</label>
        <input type="text" id="namaPelangganHasil" required>
      </div>
      <div class="form-group">
        <label for="beratLaundry">Berat Laundry (kg):</label>
        <input type="text" id="beratLaundry" required>
      </div>
      <div class="form-group">
        <label>Jumlah Pakaian:</label>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <div style="flex:1; min-width:100px;">
            <label for="baju">Baju (pcs)</label>
            <input type="number" id="baju" min="0" required>
          </div>
          <div style="flex:1; min-width:100px;">
            <label for="celana">Celana (pcs)</label>
            <input type="number" id="celana" min="0" required>
          </div>
          <div style="flex:1; min-width:100px;">
            <label for="jaket">Jaket (pcs)</label>
            <input type="number" id="jaket" min="0" required>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="total">Total Pakaian (pcs)</label>
        <input type="number" id="total" readonly>
      </div>
      <div class="form-group">
        <label for="tanggalSelesai">Tanggal Selesai:</label>
        <input type="date" id="tanggalSelesai" required>
      </div>
      <div class="form-group">
        <label for="jamMulai">Jam Mulai:</label>
        <input type="time" id="jamMulai" required>
      </div>
      <div class="form-group">
        <label for="jamSelesai">Jam Selesai:</label>
        <input type="time" id="jamSelesai" required>
      </div>
      <button type="submit" class="btnSimpan">Simpan Hasil</button>
    </form>

    <h3>Data Hasil Laundry</h3>
    <table id="tabelHasilLaundry">
      <thead>
        <tr>
          <th>Nama Pelanggan</th>
          <th>Berat (kg)</th>
          <th>Baju</th>
          <th>Celana</th>
          <th>Jaket</th>
          <th>Total</th>
          <th>Tanggal Selesai</th>
          <th>Jam Mulai</th>
          <th>Jam Selesai</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <button id="simpanSemuaPDFHasil" class="btnSimpan" style="display:none;">üíæ Simpan Semua PDF Hasil Laundry</button>
    <button id="resetHasilLaundry" class="btnSimpan" style="display:none;">‚ö†Ô∏è Reset Data Hasil Laundry</button>
  </div>

  <!-- Komplain Section -->
  <div id="komplain" class="section">
    <h2>Form Komplain Pelanggan</h2>
    <form id="komplainForm">
      <div class="form-group">
        <label for="namaPelanggan">Nama Pelanggan:</label>
        <input type="text" id="namaPelanggan" required>
      </div>
      <div class="form-group">
        <label for="tanggalKomplain">Tanggal:</label>
        <input type="date" id="tanggalKomplain" required>
      </div>
      <div class="form-group">
        <label for="jamKomplain">Jam:</label>
        <input type="time" id="jamKomplain" required>
      </div>
      <div class="form-group">
        <label for="komplainText">Isi Komplain:</label>
        <textarea id="komplainText" rows="4" required></textarea>
      </div>
      <div class="form-group">
        <label>Foto Komplain (opsional):</label><br>
        <button type="button" class="btnSimpan" onclick="document.getElementById('fotoKomplain').click()">üì∑ Ambil Foto</button>
        <input type="file" id="fotoKomplain" accept="image/*" capture="environment" style="display:none;">
        <p id="fotoPreview" style="margin-top:10px; font-size:14px; color:#555;"></p>
      </div>
      <button type="submit" class="btnSimpan">Kirim Komplain</button>
    </form>
    <h3>Data Komplain</h3>
    <table id="tabelKomplain">
      <thead><tr><th>Nama Pelanggan</th><th>Tanggal</th><th>Jam</th><th>Isi Komplain</th></tr></thead>
      <tbody></tbody>
    </table>
    <button id="simpanSemuaPDFKomplain" class="btnSimpan" style="display:none;">üíæ Simpan Semua PDF Komplain</button>
    <button id="resetKomplain" class="btnSimpan" style="display:none;">‚ö†Ô∏è Reset Data Komplain</button>
  </div>

</div>

<script>
const { jsPDF } = window.jspdf;

// Show section
function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// Load table data
function loadTable(key, tbodyId, columns){
  const data = JSON.parse(localStorage.getItem(key)) || [];
  const tbody = document.getElementById(tbodyId).querySelector('tbody');
  tbody.innerHTML = '';
  data.forEach(item => {
    const row = tbody.insertRow();
    columns.forEach(col => { row.insertCell().textContent = item[col]; });
  });
}

// Update PDF button visibility
function updatePDFButton(key, buttonId){
  const data = JSON.parse(localStorage.getItem(key)) || [];
  document.getElementById(buttonId).style.display = data.length > 0 ? 'inline-block' : 'none';
}

// Total pakaian
const bajuInput = document.getElementById('baju');
const celanaInput = document.getElementById('celana');
const jaketInput = document.getElementById('jaket');
const totalInput = document.getElementById('total');
function updateTotal(){
  totalInput.value = (parseInt(bajuInput.value)||0)+(parseInt(celanaInput.value)||0)+(parseInt(jaketInput.value)||0);
}
bajuInput.addEventListener('input', updateTotal);
celanaInput.addEventListener('input', updateTotal);
jaketInput.addEventListener('input', updateTotal);

// Reset buttons
const resetHasilBtn = document.getElementById('resetHasilLaundry');
const resetAbsenBtn = document.getElementById('resetAbsen');
const resetKomplainBtn = document.getElementById('resetKomplain');
function updateResetButtons(){
  const absenData = JSON.parse(localStorage.getItem('absen')) || [];
  const komplainData = JSON.parse(localStorage.getItem('komplain')) || [];
  const hasilData = JSON.parse(localStorage.getItem('hasilLaundry')) || [];
  resetAbsenBtn.style.display = absenData.length > 0 ? 'inline-block' : 'none';
  resetKomplainBtn.style.display = komplainData.length > 0 ? 'inline-block' : 'none';
  resetHasilBtn.style.display = hasilData.length > 0 ? 'inline-block' : 'none';
}

// --- Absen ---
document.getElementById('fotoAbsen').addEventListener('change', function(){
  document.getElementById('fotoAbsenPreview').textContent = this.files[0]?`Foto dipilih: ${this.files[0].name}`:'';
});
document.getElementById('absenForm').addEventListener('submit', function(e){
  e.preventDefault();
  const nama = document.getElementById('namaPegawai').value;
  const tanggal = document.getElementById('tanggalAbsen').value;
  const jam = document.getElementById('jamAbsen').value;
  let data = JSON.parse(localStorage.getItem('absen')) || [];
  data.push({nama,tanggal,jam});
  localStorage.setItem('absen', JSON.stringify(data));
  loadTable('absen','tabelAbsen',['nama','tanggal','jam']);
  updatePDFButton('absen','simpanSemuaPDFAbsen');
  updateResetButtons();
  this.reset(); document.getElementById('fotoAbsenPreview').textContent='';
});
document.getElementById('simpanSemuaPDFAbsen').addEventListener('click', function(){
  const data = JSON.parse(localStorage.getItem('absen')) || [];
  if(data.length===0)return;
  const doc = new jsPDF();
  let y=20; doc.setFontSize(16); doc.text("Semua Data Absen JETWASH LAUNDRY",10,y); y+=10;
  doc.setFontSize(12);
  data.forEach((item,index)=>{
    if(y>270){ doc.addPage(); y=20; }
    doc.text(`${index+1}. Nama: ${item.nama}, Tanggal: ${item.tanggal}, Jam: ${item.jam}`,10,y); y+=10;
  });
  doc.save('Semua_Absen.pdf');
});
resetAbsenBtn.addEventListener('click', function(){
  if(confirm("‚ö†Ô∏è Apakah Anda yakin ingin menghapus semua data Absen?")){
    localStorage.removeItem('absen');
    loadTable('absen','tabelAbsen',['nama','tanggal','jam']);
    updatePDFButton('absen','simpanSemuaPDFAbsen');
    updateResetButtons();
  }
});

// --- Hasil Laundry ---
document.getElementById('hasilForm').addEventListener('submit', function(e){
  e.preventDefault();
  const nama = document.getElementById('namaPelangganHasil').value;
  const berat = document.getElementById('beratLaundry').value;
  const baju = bajuInput.value;
  const celana = celanaInput.value;
  const jaket = jaketInput.value;
  const total = totalInput.value;
  const tanggalSelesai = document.getElementById('tanggalSelesai').value;
  const jamMulai = document.getElementById('jamMulai').value;
  const jamSelesai = document.getElementById('jamSelesai').value;
  let data = JSON.parse(localStorage.getItem('hasilLaundry')) || [];
  data.push({nama,berat,baju,celana,jaket,total,tanggalSelesai,jamMulai,jamSelesai});
  localStorage.setItem('hasilLaundry', JSON.stringify(data));
  loadTable('hasilLaundry','tabelHasilLaundry',['nama','berat','baju','celana','jaket','total','tanggalSelesai','jamMulai','jamSelesai']);
  updatePDFButton('hasilLaundry','simpanSemuaPDFHasil');
  updateResetButtons();
  this.reset(); totalInput.value='';
});
document.getElementById('simpanSemuaPDFHasil').addEventListener('click', function(){
  const data = JSON.parse(localStorage.getItem('hasilLaundry')) || [];
  if(data.length===0)return;
  const doc = new jsPDF();
  let y=20; doc.setFontSize(16); doc.text("Semua Data Hasil Laundry JETWASH LAUNDRY",10,y); y+=10;
  doc.setFontSize(12);
  data.forEach((item,index)=>{
    if(y>270){ doc.addPage(); y=20; }
    doc.text(`${index+1}. Nama: ${item.nama}`,10,y); y+=7;
    doc.text(`Berat: ${item.berat} kg, Baju: ${item.baju} pcs, Celana: ${item.celana} pcs, Jaket: ${item.jaket} pcs`,10,y); y+=7;
    doc.text(`Total: ${item.total} pcs, Tanggal Selesai: ${item.tanggalSelesai}`,10,y); y+=7;
    doc.text(`Jam Mulai: ${item.jamMulai}, Jam Selesai: ${item.jamSelesai}`,10,y); y+=10;
  });
  doc.save('Semua_Hasil_Laundry.pdf');
});
resetHasilBtn.addEventListener('click', function(){
  if(confirm("‚ö†Ô∏è Apakah Anda yakin ingin menghapus semua data Hasil Laundry?")){
    localStorage.removeItem('hasilLaundry');
    loadTable('hasilLaundry','tabelHasilLaundry',['nama','berat','baju','celana','jaket','total','tanggalSelesai','jamMulai','jamSelesai']);
    updatePDFButton('hasilLaundry','simpanSemuaPDFHasil');
    updateResetButtons();
  }
});

// --- Komplain ---
document.getElementById('fotoKomplain').addEventListener('change', function(){
  document.getElementById('fotoPreview').textContent = this.files[0]?`Foto dipilih: ${this.files[0].name}`:'';
});
document.getElementById('komplainForm').addEventListener('submit', function(e){
  e.preventDefault();
  const nama = document.getElementById('namaPelanggan').value;
  const tanggal = document.getElementById('tanggalKomplain').value;
  const jam = document.getElementById('jamKomplain').value;
  const isi = document.getElementById('komplainText').value;
  let data = JSON.parse(localStorage.getItem('komplain')) || [];
  data.push({nama,tanggal,jam,isi});
  localStorage.setItem('komplain', JSON.stringify(data));
  loadTable('komplain','tabelKomplain',['nama','tanggal','jam','isi']);
  updatePDFButton('komplain','simpanSemuaPDFKomplain');
  updateResetButtons();
  this.reset(); document.getElementById('fotoPreview').textContent='';
});
document.getElementById('simpanSemuaPDFKomplain').addEventListener('click', function(){
  const data = JSON.parse(localStorage.getItem('komplain')) || [];
  if(data.length===0)return;
  const doc = new jsPDF();
  let y=20; doc.setFontSize(16); doc.text("Semua Data Komplain JETWASH LAUNDRY",10,y); y+=10;
  doc.setFontSize(12);
  data.forEach((item,index)=>{
    if(y>270){ doc.addPage(); y=20; }
    doc.text(`${index+1}. Nama: ${item.nama}, Tanggal: ${item.tanggal}, Jam: ${item.jam}`,10,y); y+=7;
    doc.text(`Isi: ${item.isi}`,10,y); y+=10;
  });
  doc.save('Semua_Komplain.pdf');
});
resetKomplainBtn.addEventListener('click', function(){
  if(confirm("‚ö†Ô∏è Apakah Anda yakin ingin menghapus semua data Komplain?")){
    localStorage.removeItem('komplain');
    loadTable('komplain','tabelKomplain',['nama','tanggal','jam','isi']);
    updatePDFButton('komplain','simpanSemuaPDFKomplain');
    updateResetButtons();
  }
});

// Load all saved data on page load
document.addEventListener('DOMContentLoaded', function(){
  loadTable('absen','tabelAbsen',['nama','tanggal','jam']);
  loadTable('hasilLaundry','tabelHasilLaundry',['nama','berat','baju','celana','jaket','total','tanggalSelesai','jamMulai','jamSelesai']);
  loadTable('komplain','tabelKomplain',['nama','tanggal','jam','isi']);
  updatePDFButton('absen','simpanSemuaPDFAbsen');
  updatePDFButton('hasilLaundry','simpanSemuaPDFHasil');
  updatePDFButton('komplain','simpanSemuaPDFKomplain');
  updateResetButtons();
});
</script>

</body>
</html>
