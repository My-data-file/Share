<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QC Finishing</title>
<style>
:root{
  --bg:#f4f7fb; --card:#fff; --accent:#0ea5a4;
  --text:#1f2937; --muted:#6b7280;
}
body,html{
  margin:0; padding:0;
  width:100%; height:100%;
  background:var(--bg);
  color:var(--text);
  font-family:Segoe UI, sans-serif;
  overflow-x:hidden;
}
.container{
  display:flex; min-height:100vh; width:100%;
}
nav{
  width:220px; background:var(--card); padding:1rem;
  box-shadow:2px 0 5px rgba(0,0,0,.1);
}
nav button{
  display:block; width:100%; margin-bottom:8px;
  padding:0.6rem; border:none; border-radius:6px;
  background:var(--accent); color:#fff; cursor:pointer;
}
main{
  flex:1; padding:1rem; width:100%; box-sizing:border-box;
}
.tabs{display:flex; gap:0.5rem; margin-bottom:1rem;}
.tabs button{
  flex:1; padding:0.6rem; border:none;
  border-radius:6px; cursor:pointer;
  background:var(--muted); color:#fff;
}
.tabs button.active{background:var(--accent);}
.tab-content{display:none;}
.tab-content.active{display:block;}
.grid-container{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:0.8rem;
}
.grid-card{
  background:var(--card); border-radius:8px;
  padding:0.8rem; box-shadow:0 2px 4px rgba(0,0,0,.1);
  width:100%; box-sizing:border-box;
}
.grid-card h4{margin:0 0 0.3rem;}
.card-actions{margin-top:0.5rem; display:flex; gap:6px; flex-wrap:wrap;}
.btn-icon{
  border:none; cursor:pointer; font-size:1rem;
  padding:0.4rem 0.6rem; border-radius:6px;
}
.btn-call{background:#3b82f6; color:#fff;}
.btn-edit{background:#f59e0b; color:#fff;}
.btn-delete{background:#ef4444; color:#fff;}
.btn-save{background:#10b981; color:#fff;}

/* EDIT FORM INLINE */
.edit-grid{
  display:flex; flex-wrap:wrap; gap:6px; width:100%;
}
.edit-grid input{
  flex:1 1 calc(50% - 6px);
  min-width:120px;
  padding:6px; border:1px solid #ddd; border-radius:4px;
  box-sizing:border-box;
}

/* RESPONSIVE */
@media(max-width:768px){
  .container{flex-direction:column;}
  nav{width:100%; display:flex; overflow-x:auto;}
  nav button{flex:1; min-width:100px;}
  main{padding:0.8rem;}
  .edit-grid input{flex:1 1 100%;}
}
@media(max-width:480px){
  .grid-container{grid-template-columns:1fr;}
}
</style>
</head>
<body>
<div class="container">
  <nav>
    <button onclick="showMenu('qcFinishing')">QC Finishing</button>
  </nav>
  <main id="qcFinishing">
    <div class="tabs">
      <button data-tab="inputFinishing" class="active" onclick="switchTab(this)">Input</button>
      <button data-tab="hasilFinishing" onclick="switchTab(this)">Hasil</button>
    </div>
    <div id="inputFinishing" class="tab-content active">
      <form onsubmit="addFinishingItem(); return false;">
        <input id="finishingNama" placeholder="Nama Barang"><br>
        <input id="finishingNoKF" placeholder="No KF"><br>
        <input id="finishingOrder" placeholder="Order"><br>
        <input id="finishingBagus" placeholder="Bagus"><br>
        <input id="finishingJenisBS" placeholder="Jenis BS"><br>
        <input id="finishingJumlahBS" placeholder="Jumlah BS"><br>
        <button type="submit">Tambah</button>
      </form>
    </div>
    <div id="hasilFinishing" class="tab-content">
      <div id="gridFinishing" class="grid-container"></div>
    </div>
  </main>
</div>

<script>
function showMenu(menuId){
  document.querySelectorAll("main").forEach(m=>m.style.display="none");
  document.getElementById(menuId).style.display="block";
}
function switchTab(btn){
  const container=btn.closest("main");
  container.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  container.querySelectorAll(".tab-content").forEach(tc=>tc.classList.remove("active"));
  container.querySelector("#"+btn.dataset.tab).classList.add("active");
}
function clearFinishingForm(){
  ["finishingNama","finishingNoKF","finishingOrder","finishingBagus","finishingJenisBS","finishingJumlahBS"]
  .forEach(id=>document.getElementById(id).value="");
}
function addFinishingItem(){
  let items=JSON.parse(localStorage.getItem('finishing'))||[];
  let now=new Date().toLocaleString();
  let item={
    tanggal:now,
    nama:finishingNama.value,
    noKF:finishingNoKF.value,
    order:finishingOrder.value,
    bagus:finishingBagus.value,
    jenisBS:finishingJenisBS.value,
    jumlahBS:finishingJumlahBS.value
  };
  if(item.nama.trim()!==""){
    items.push(item);
    localStorage.setItem('finishing',JSON.stringify(items));
    clearFinishingForm();
    renderGridFinishing();
    // otomatis pindah ke tab hasil
    switchTab(document.querySelector('#qcFinishing .tabs button[data-tab="hasilFinishing"]'));
  }
}
function renderGridFinishing(){
  let items=JSON.parse(localStorage.getItem('finishing'))||[];
  const container=document.getElementById('gridFinishing');
  container.innerHTML="";
  items.forEach((item,i)=>{
    const card=document.createElement('div');
    card.className="grid-card";
    card.innerHTML=`
      <h4>${item.nama}</h4>
      <small>${item.tanggal}</small><br>
      No KF: ${item.noKF}<br>
      Order: ${item.order}
      <div class="card-actions">
        <button class="btn-icon btn-call" onclick="callFinishing(${i})">üì§</button>
        <button class="btn-icon btn-edit" onclick="editFinishingInline(${i})">‚úèÔ∏è</button>
        <button class="btn-icon btn-delete" onclick="deleteFinishing(${i})">üóëÔ∏è</button>
      </div>`;
    container.appendChild(card);
  });
}
function callFinishing(index){
  let items=JSON.parse(localStorage.getItem('finishing'))||[];
  let item=items[index]; if(!item) return;
  finishingNama.value=item.nama;
  finishingNoKF.value=item.noKF;
  finishingOrder.value=item.order;
  finishingBagus.value=item.bagus;
  finishingJenisBS.value=item.jenisBS;
  finishingJumlahBS.value=item.jumlahBS;
  showMenu('qcFinishing');
  switchTab(document.querySelector('#qcFinishing .tabs button[data-tab="inputFinishing"]'));
}
function deleteFinishing(index){
  let items=JSON.parse(localStorage.getItem('finishing'))||[];
  items.splice(index,1);
  localStorage.setItem('finishing',JSON.stringify(items));
  renderGridFinishing();
}
function editFinishingInline(index){
  let items=JSON.parse(localStorage.getItem('finishing'))||[];
  let item=items[index];
  const container=document.getElementById('gridFinishing');
  const card=container.children[index];
  card.innerHTML=`
    <div class="edit-grid">
      <input class="edit-inline" value="${item.nama}" placeholder="Nama">
      <input class="edit-inline" value="${item.noKF}" placeholder="No KF">
      <input class="edit-inline" value="${item.order}" placeholder="Order">
      <input class="edit-inline" value="${item.bagus}" placeholder="Bagus">
      <input class="edit-inline" value="${item.jenisBS}" placeholder="Jenis BS">
      <input class="edit-inline" value="${item.jumlahBS}" placeholder="Jumlah BS">
    </div>
    <div class="card-actions">
      <button class="btn-icon btn-save" onclick="saveFinishingInline(${index})">üíæ</button>
      <button class="btn-icon btn-delete" onclick="deleteFinishing(${index})">üóëÔ∏è</button>
    </div>`;
}
function saveFinishingInline(index){
  const card=document.getElementById('gridFinishing').children[index];
  const inputs=card.querySelectorAll('.edit-inline');
  let items=JSON.parse(localStorage.getItem('finishing'))||[];
  items[index]={
    ...items[index],
    nama:inputs[0].value,
    noKF:inputs[1].value,
    order:inputs[2].value,
    bagus:inputs[3].value,
    jenisBS:inputs[4].value,
    jumlahBS:inputs[5].value
  };
  localStorage.setItem('finishing',JSON.stringify(items));
  renderGridFinishing();
}
showMenu('qcFinishing');
renderGridFinishing();
</script>
</body>
</html>
s
